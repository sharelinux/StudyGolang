## 费曼笔记 ##
### 接口类型的合理运用

#### 基础概念

当我们在谈论“接口”的时候，一定指的是接口类型。因为接口类型与其他数据类型不同，它是没法被实例化的。

既不能通过调用new函数或make函数创建出一个接口类型的值，也无法用字面量来表示一个接口类型的值。

接口类型的类型字面量与结构体类型的看起来有些相似, 结构体类型包裹的是它的字段声明，而接口类型包裹的是它的方法定义。

接口类型声明中的这些方法所代表的就是该接口的方法集合。一个接口的方法集合就是它的全部特征。

特征:
1. 接口无法被实例化;
2. 不能通过new函数和make函数创建一个接口类型的值, 也无法用字面量来表示一个接口类型的值;
3. 结构体类型包裹的是它的字段声明，而接口类型包裹的是它的方法定义。


#### 怎样判定一个数据类型的某一个方法实现的就是某个接口类型中的某个方法呢？
答: 两个充分必要条件，一个是“两个方法的签名需要完全一致”，另一个是“两个方法的名称要一模一样”。

对于一个接口类型的变量来说，我们赋给它的值可以被叫做它的实际值（也称动态值），而该值的类型可以被叫做这个变量的实际类型（也称动态类型）。

如果我们使用一个变量给另外一个变量赋值，那么真正赋给后者的，并不是前者持有的那个值，而是该值的一个副本。


#### 接口变量赋值
当我们给一个接口变量赋值的时候，该变量的动态类型会与它的动态值一起被存储在一个专用的数据结构中。这个专用的数据结构叫做iface.

iface的实例会包含两个指针，一个是指向类型信息的指针，另一个是指向动态值的指针。这里的类型信息是由另一个专用数据结构的实例承载的，其中包含了动态值的类型，以及使它实现了接口的方法和调用它们的途径，等等。


#### 思考问题
问题 1：接口变量的值在什么情况下才真正为nil？
答： 要么只声明它但不做初始化，要么直接把字面量nil赋给它。

问题 2：怎样实现接口之间的组合？
答：接口类型间的嵌入也被称为接口的组合。
注意：接口类型间的嵌入要更简单一些，因为它不会涉及方法间的“屏蔽”。只要组合的接口之间有同名的方法就会产生冲突，从而无法通过编译，即使同名方法的签名彼此不同也会是如此。因此，接口的组合根本不可能导致“屏蔽”现象的出现。


#### 总结
Go 语言的接口常用于代表某种能力或某类特征。首先，我们要弄清楚的是，接口变量的动态值、动态类型和静态类型都代表了什么。这些都是正确使用接口变量的基础。当我们给接口变量赋值时，接口变量会持有被赋予值的副本，而不是它本身。

更重要的是，接口变量的值并不等同于这个可被称为动态值的副本。它会包含两个指针，一个指针指向动态值，一个指针指向类型信息。

即使我们把一个值为nil的某个实现类型的变量赋给了接口变量，后者的值也不可能是真正的nil。虽然这时它的动态值会为nil，但它的动态类型确是存在的。

请记住，除非我们只声明而不初始化，或者显式地赋给它nil，否则接口变量的值就不会为nil。